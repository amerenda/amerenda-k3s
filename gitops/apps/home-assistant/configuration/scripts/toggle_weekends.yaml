toggle_weekends:
  alias: "Toggle Weekends for Room Slot"
  description: "Toggles all weekends (Saturday-Sunday) for a specific room and time slot"
  mode: "single"
  fields:
    room:
      description: "Room key (e.g., bedroom, living_room)"
      selector:
        text: {}
    slot:
      description: "Time slot (morning, day, evening, night)"
      selector:
        select:
          options:
            - morning
            - day
            - evening
            - night
  sequence:
    - variables:
        room: "{{ room }}"
        slot: "{{ slot }}"
        saturday_helper: "input_boolean.{{ room }}_{{ slot }}_saturday"
        sunday_helper: "input_boolean.{{ room }}_{{ slot }}_sunday"
        # Check current state - if all are on, turn off; otherwise turn on
        saturday_state: "{{ states(saturday_helper) }}"
        sunday_state: "{{ states(sunday_helper) }}"
        all_on: >-
          {{ saturday_state == 'on' and sunday_state == 'on' }}
        target_state: "{{ 'off' if all_on else 'on' }}"
    - parallel:
        - service: "input_boolean.turn_{{ target_state }}"
          target:
            entity_id: "{{ saturday_helper }}"
        - service: "input_boolean.turn_{{ target_state }}"
          target:
            entity_id: "{{ sunday_helper }}"

