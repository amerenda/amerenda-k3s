strategy:
  type: custom:mushroom-strategy
  options:
    # Hide unavailable entities and specific entity configurations
    card_options:
      # Camera cards - hide when privacy mode is enabled
      camera.bedroom_fluent:
        hidden: "{{ is_state('switch.bedroom_privacy_mode', 'on') }}"
      camera.living_room_fluent:
        hidden: "{{ is_state('switch.living_room_privacy_mode', 'on') }}"
      # Hide individual lights that duplicate single-member groups
      light.fixture:
        hidden: true
      light.bathroom_1:
        hidden: true
      light.hallway_1:
        hidden: true
      # Hide PTZ and guard buttons, sirens, and motion/animal sensors for bedroom and living room when unavailable
      # Bedroom entities
      button.bedroom_guard_go_to:
        hidden: "{{ is_state('button.bedroom_guard_go_to', 'unavailable') }}"
      button.bedroom_ptz_down:
        hidden: "{{ is_state('button.bedroom_ptz_down', 'unavailable') }}"
      button.bedroom_ptz_left:
        hidden: "{{ is_state('button.bedroom_ptz_left', 'unavailable') }}"
      button.bedroom_ptz_right:
        hidden: "{{ is_state('button.bedroom_ptz_right', 'unavailable') }}"
      button.bedroom_ptz_up:
        hidden: "{{ is_state('button.bedroom_ptz_up', 'unavailable') }}"
      button.bedroom_ptz_stop:
        hidden: "{{ is_state('button.bedroom_ptz_stop', 'unavailable') }}"
      siren.bedroom_siren:
        hidden: "{{ is_state('siren.bedroom_siren', 'unavailable') }}"
      binary_sensor.bedroom_animal:
        hidden: "{{ is_state('binary_sensor.bedroom_animal', 'unavailable') }}"
      binary_sensor.bedroom_motion:
        hidden: "{{ is_state('binary_sensor.bedroom_motion', 'unavailable') }}"
      binary_sensor.bedroom_baby_crying:
        hidden: "{{ is_state('binary_sensor.bedroom_baby_crying', 'unavailable') }}"
      # Living room entities
      button.living_room_guard_go_to:
        hidden: "{{ is_state('button.living_room_guard_go_to', 'unavailable') }}"
      button.living_room_ptz_down:
        hidden: "{{ is_state('button.living_room_ptz_down', 'unavailable') }}"
      button.living_room_ptz_left:
        hidden: "{{ is_state('button.living_room_ptz_left', 'unavailable') }}"
      button.living_room_ptz_right:
        hidden: "{{ is_state('button.living_room_ptz_right', 'unavailable') }}"
      button.living_room_ptz_up:
        hidden: "{{ is_state('button.living_room_ptz_up', 'unavailable') }}"
      button.living_room_ptz_stop:
        hidden: "{{ is_state('button.living_room_ptz_stop', 'unavailable') }}"
      siren.living_room_siren:
        hidden: "{{ is_state('siren.living_room_siren', 'unavailable') }}"
      binary_sensor.living_room_animal:
        hidden: "{{ is_state('binary_sensor.living_room_animal', 'unavailable') }}"
      binary_sensor.living_room_motion:
        hidden: "{{ is_state('binary_sensor.living_room_motion', 'unavailable') }}"
      binary_sensor.living_room_baby_crying:
        hidden: "{{ is_state('binary_sensor.living_room_baby_crying', 'unavailable') }}"

    # Hide unavailable entities using card_options templates
    # Note: mushroom-strategy doesn't support domain-level filtering by state
    # We need to add specific entities here as they're discovered
    # Alternatively, entities can be hidden individually in card_options above

    # Quick access cards (between greeting and area cards)
    quick_access_cards:
      - type: custom:mushroom-title-card
        title: Quick Access
      - type: conditional
        conditions:
          - condition: state
            entity: weather.home
            state: available
        card:
          type: custom:mushroom-weather-card
          entity: weather.home
          show_temperature: true
          show_conditions: true
          primary_info: state
          secondary_info: temperature
      # System Status - commented out as it requires System Health integration
      # - type: entities
      #   title: System Status
      #   entities:
      #     - entity: sensor.home_assistant_version
      #       name: Home Assistant
      #       secondary_info: state
      #     - entity: binary_sensor.ha_system_health
      #       name: System Health
      #       secondary_info: state

    # Custom chips on home view
    chips:
      extra_chips:
          # System Health chip - commented out as it requires System Health integration
          # - type: entity
          #   entity: binary_sensor.ha_system_health
          #   icon: mdi:heart-pulse
          #   icon_color: |
          #     {% if is_state('binary_sensor.ha_system_health', 'on') %}
          #       green
          #     {% else %}
          #       red
          #     {% endif %}
          #   content_info: none
          #   tap_action:
          #     action: navigate
          #     navigation_path: /config/info
        - type: entity
          entity: sun.sun
          icon: mdi:weather-sunset
          content_info: elevation
          tap_action:
            action: navigate
            navigation_path: /config/energy
        - type: conditional
          conditions:
            - condition: state
              entity: alarm_control_panel.home_alarm
              state: available
          chip:
            type: entity
            entity: alarm_control_panel.home_alarm
            icon: mdi:shield-home
            icon_color: |
              {% if is_state('alarm_control_panel.home_alarm', 'armed_away') %}
                red
              {% elif is_state('alarm_control_panel.home_alarm', 'armed_home') %}
                orange
              {% else %}
                green
              {% endif %}
            content_info: none
            tap_action:
              action: toggle

    # Extra cards (below area cards)
    extra_cards:
      - type: custom:mushroom-title-card
        title: Home Scene Control
      # Scene Control Card - Toggle home lights and activate scenes for all rooms
      - type: grid
        square: true
        columns: 3
        cards:
          # Toggle home lights button - icon only
          - type: button
            entity: light.home
            show_name: false
            icon: mdi:lightbulb
            tap_action:
              action: toggle
            show_state: false
          # Morning scene button - icon only
          - type: button
            show_name: false
            icon: mdi:weather-sunset-up
            tap_action:
              action: call-service
              service: script.activate_all_room_scenes
              service_data:
                slot: morning
          # Day scene button - icon only
          - type: button
            show_name: false
            icon: mdi:weather-sunny
            tap_action:
              action: call-service
              service: script.activate_all_room_scenes
              service_data:
                slot: day
          # Evening scene button - icon only
          - type: button
            show_name: false
            icon: mdi:weather-sunset-down
            tap_action:
              action: call-service
              service: script.activate_all_room_scenes
              service_data:
                slot: evening
          # Night scene button - icon only
          - type: button
            show_name: false
            icon: mdi:weather-night
            tap_action:
              action: call-service
              service: script.activate_all_room_scenes
              service_data:
                slot: night
          # Movie scene button - icon only
          - type: button
            show_name: false
            icon: mdi:movie-open
            tap_action:
              action: call-service
              service: scene.turn_on
              target:
                entity_id: scene.home_movie

    # View customizations
    views:
      # Customize default view
      default:
        title: Home
        icon: mdi:home
        path: home

