views:
  - title: Uni
    icon: mdi:cat
    cards:
      - type: grid
        columns: 1
        square: false
        cards:
          - type: custom:mushroom-title-card
            title: Cat Monitor
            subtitle: "Location & Activity"

          # Current Room / Last Seen
          - type: custom:mushroom-template-card
            primary: >
              {% set loc = states('input_text.event_image_location') %}
              {% if loc in ['unknown', 'unavailable', ''] %}
                Unknown
              {% else %}
                {{ loc | replace('_', ' ') | title }}
              {% endif %}
            secondary: >
               {% set ts = states('input_text.event_image_timestamp') %}
               {% if ts not in ['unknown', 'unavailable', ''] %}
                 {% try %}
                   Last seen: {{ strptime(ts, '%Y%m%d_%H%M%S').strftime('%-I:%M %p') }}
                 {% except %}
                   Last seen: {{ ts }}
                 {% endtry %}
               {% else %}
                 Last seen: Unknown
               {% endif %}
            icon: mdi:cat
            icon_color: >
              {% set loc = states('input_text.event_image_location') %}
              {% if loc == 'bedroom' %}
                purple
              {% elif loc == 'living_room' %}
                blue
              {% else %}
                grey
              {% endif %}

          # Latest Picture
          - type: conditional
            conditions:
              - entity: input_text.event_image_location
                state_not: ""
              - entity: input_text.event_image_location
                state_not: "unknown"
            card:
              type: markdown
              content: >
                {% set loc = states('input_text.event_image_location') %}
                {% set ts = states('input_text.event_image_timestamp') %}
                ![Pet](/local/pets/{{ loc }}_{{ ts }}.jpg)

          # Activity Graph
          - type: history-graph
            title: "Activity (Last 24h)"
            hours_to_show: 24
            refresh_interval: 60
            entities:
              - entity: binary_sensor.bedroom_animal
                name: Bedroom
              - entity: binary_sensor.living_room_animal
                name: Living Room
